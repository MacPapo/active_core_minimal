<%= turbo_stream_from "sales" %>

<% content_for :page_title, "Vendite" %>

<%# content_for :page_counter, t("search.results", count: @pagy.count) %>

<% content_for :page_actions do %>
  <%= link_to [:new, :sale],
	      class: "btn btn-primary gap-2",
	      data: { turbo_frame: "modal" } do %>
    <%= icon("add", size: 20) %>
    <span class="hidden sm:inline"><%= t("actions.new", default: "Nuova") %></span>
  <% end %>
<% end %>

<!-- TODO filters -->

<%= render "shared/header/page" %>

<%= render "shared/filter/active", filter_keys: @keys %>

<%= render "shared/table", pagy: @pagy do %>
  <thead>
    <tr>
      <th class="pl-6">Data</th>
      <th>Ricevuta</th>
      <th>Socio</th>
      <th>Prodotto</th>
      <th class="text-center">Metodo</th>
      <th class="text-right pr-6">Totale</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <%= render partial: "sale_row", collection: @sales, as: :sale %>

    <% if @sales.empty? %>
      <tr>
        <td colspan="7" class="text-center py-10 opacity-50 italic">
          Nessuna vendita registrata.
        </td>
      </tr>
    <% end %>
  </tbody>
<% end %>
