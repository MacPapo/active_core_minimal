<div class="container mx-auto max-w-2xl p-6">
  <div class="flex justify-between items-center mb-6">
    <%= link_to :back, class: "btn btn-ghost btn-sm gap-1 pl-0 opacity-60 hover:opacity-100" do %>
      <%= icon("arrow_back", size: 16) %>
      Indietro
    <% end %>

    <div class="flex gap-2">
      <%= link_to sale_path(@sale, format: :pdf), class: "btn btn-primary btn-sm gap-2", target: "_blank" do %>
        <%= icon("print", size: 16) %>
        Stampa PDF
      <% end %>
    </div>
  </div>

  <%# EFFETTO FOGLIO DI CARTA %>
  <div class="card bg-base-100 shadow-2xl border border-base-200 rounded-none relative">
    <%# Zig-zag effect (Opzionale CSS puro, qui semplificato con border) %>
    <div class="border-t-8 border-primary w-full absolute top-0"></div>

    <div class="card-body p-8 sm:p-12 text-center">
      <%# HEADER RICEVUTA %>
      <div class="mb-8">
        <h2
          class="
            text-3xl font-bold font-mono uppercase tracking-widest
            text-base-content
          "
        >
          Ricevuta
        </h2>

        <div class="text-sm opacity-50 font-mono mt-1">
          #<%= @sale.receipt_code.presence || "PENDING" %>
        </div>

        <div class="text-sm opacity-50 font-mono">
          del <%= l(@sale.sold_on) %>
        </div>
      </div>

      <%# DETTAGLI TRANSAZIONE %>
      <div
        class="
          grid grid-cols-2 gap-8 text-left border-t border-b border-dashed
          border-base-content/20 py-8 my-4
        "
      >
        <div>
          <div class="text-xs uppercase font-bold opacity-40">Emessa per</div>

          <div class="font-bold text-lg"><%= @sale.member.full_name %></div>

          <div class="font-mono text-sm opacity-70">
            <%= @sale.member.fiscal_code %>
          </div>
        </div>

        <div class="text-right">
          <div class="text-xs uppercase font-bold opacity-40">Emessa da</div>

          <div class="font-medium"><%= current_user.full_name %></div>

          <div class="font-mono text-sm opacity-70">ActiveCore Gym</div>
        </div>

        <div class="col-span-2">
          <div class="text-xs uppercase font-bold opacity-40 mb-1">
            Descrizione
          </div>

          <div class="flex justify-between items-baseline">
            <span class="text-xl font-medium"><%= @sale.product_name_snapshot %></span>
            <span class="font-mono text-xl"><%= format_money(@sale.amount) %></span>
          </div>

          <% if @sale.notes.present? %>
            <p class="text-sm opacity-60 mt-1 italic"><%= @sale.notes %></p>
          <% end %>
        </div>
      </div>

      <%# TOTALE %>
      <div class="flex justify-between items-end mt-4">
        <div class="text-left">
          <div class="badge badge-outline text-xs uppercase font-bold">
            <%= @sale.payment_method.humanize %>
          </div>
        </div>
        <div class="text-right">
          <div class="text-xs uppercase font-bold opacity-40">Totale</div>
          <div class="text-4xl font-bold font-mono text-primary">
            <%= format_money(@sale.amount) %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
