<% content_for :discipline_actions do %>
  <ul>
    <li>
      <h2
        class="
          menu-title px-4 py-2 opacity-50 text-xs font-bold uppercase
          tracking-wider
        "
      >
        <%= discipline.name %>
      </h2>

      <ul>
        <li>
          <%= active_link_to discipline_path(discipline), active: :exclusive do %>
            <%= icon("badge", size: 18) %>
            <%= t("disciplines.sidebar.details", default: "Panoramica") %>
          <% end %>
        </li>

        <li>
          <%= active_link_to discipline_members_path(discipline), active: :exclusive do %>
            <%= icon("group", size: 18) %>
            <%= t("disciplines.sidebar.members", default: "Registro Iscritti") %>
          <% end %>
        </li>
      </ul>
    </li>
  </ul>
<% end %>

<% content_for :record_title, discipline.name %>

<% content_for :record_subtitle do %>
  <div class="flex items-center gap-2 text-sm opacity-70">
    <div class="badge badge-sm badge-ghost gap-1">
      <%= icon("calendar_today", size: 12) %>
      <%= t("disciplines.joined", default: "Dal") %>
      <%= format_date(discipline.created_at) %>
    </div>

    <% if discipline.discarded? %>
      <span class="badge badge-error badge-sm">ARCHIVIATO</span>
    <% end %>
  </div>
<% end %>

<% content_for :record_actions do %>
  <div class="flex items-center gap-2">
    <% trigger_button = capture do %>
      <div class="btn btn-ghost btn-square"><%= icon("more", size: 20) %></div>
    <% end %>

    <%= render "shared/dropdown", trigger: trigger_button do %>
      <li>
        <%= link_to edit_discipline_path(discipline), data: { turbo_frame: "modal" } do %>
          <%= icon("edit", size: 16) %> Modifica
        <% end %>
      </li>

      <div class="divider my-1"></div>

      <li>
        <%= link_to discipline_path(discipline),
		    class: "text-error hover:bg-error/10",
		    data: {
		      turbo_method: :delete,
		      turbo_confirm: "Sei sicuro di voler archiviare questa disciplina?"
		    } do %>
          <%= icon("delete", size: 16) %> Archivia Disciplina
        <% end %>
      </li>
    <% end %>
  </div>
<% end %>

<%# Renderizza l'header standard (che usa i content_for qui sopra) %>

<%= render "shared/header/record" %>

<%# --- 3. CONTENUTO DELLA VIEW --- %>

<div class="mt-6"><%= yield %></div>
